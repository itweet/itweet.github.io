<!DOCTYPE html>
<html lang>
  <head><meta name="generator" content="Hexo 3.8.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,minimum-scale=1,maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">



  <meta name="description" content="ubuntu ambari development">




  <meta name="keywords" content="ubuntu,">





  <link rel="alternate" href="/atom.xml" title="WHOAMI">




  <link rel="shortcut icon" type="image/x-icon" href="https://raw.githubusercontent.com/itweet/itweet.github.io/master/favicon.ico?v=1.1">



<link rel="canonical" href="http://itweet.github.io/2016/12/28/ubuntu ambari development/">


<meta name="description" content="ubuntu for sublime-test-3 install123456sudo add-apt-repository ppa:webupd8team/sublime-text-3sudo apt-get update sudo apt-get install sublime-text-installer ubuntu for pycharm- https://www.jetbrains.c">
<meta name="keywords" content="ubuntu">
<meta property="og:type" content="article">
<meta property="og:title" content="ubuntu ambari development">
<meta property="og:url" content="http://itweet.github.io/2016/12/28/ubuntu ambari development/index.html">
<meta property="og:site_name" content="WHOAMI">
<meta property="og:description" content="ubuntu for sublime-test-3 install123456sudo add-apt-repository ppa:webupd8team/sublime-text-3sudo apt-get update sudo apt-get install sublime-text-installer ubuntu for pycharm- https://www.jetbrains.c">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://itweet.github.io/2016/12/28/ubuntu%20ambari%20development/ambari-build-for-ubuntu-15.4-LTS.png">
<meta property="og:updated_time" content="2018-07-02T13:09:15.510Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ubuntu ambari development">
<meta name="twitter:description" content="ubuntu for sublime-test-3 install123456sudo add-apt-repository ppa:webupd8team/sublime-text-3sudo apt-get update sudo apt-get install sublime-text-installer ubuntu for pycharm- https://www.jetbrains.c">
<meta name="twitter:image" content="http://itweet.github.io/2016/12/28/ubuntu%20ambari%20development/ambari-build-for-ubuntu-15.4-LTS.png">


<link rel="stylesheet" type="text/css" href="/css/style.css?v=1.1">
<link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">





<script type="text/javascript">
  var themeConfig = {
    fancybox: {
      enable: false
    },
  };
</script>




  



    <title> ubuntu ambari development - WHOAMI </title>
  </head>

  <body>
    <div id="page">
      <header id="masthead"><div class="site-header-inner">
    <h1 class="site-title">
        <a href="/." class="logo">WHOAMI</a>
    </h1>

    <nav id="nav-top">
        
            <ul id="menu-top" class="nav-top-items">
                
                    <li class="menu-item">
                        <a href="/archives">
                            
                            
                                Archives
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/about">
                            
                            
                                About
                            
                        </a>
                    </li>
                
                    <li class="menu-item">
                        <a href="/atom.xml">
                            
                            
                                RSS
                            
                        </a>
                    </li>
                
            </ul>
        
  </nav>
</div>

      </header>
      <div id="content">
        
    <div id="primary">
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          ubuntu ambari development
        
      </h1>

      <time class="post-time">
          12月 28 2016
      </time>
    </header>



    
            <div class="post-content">
            <h1 id="ubuntu-for-sublime-test-3-install"><a href="#ubuntu-for-sublime-test-3-install" class="headerlink" title="ubuntu for sublime-test-3 install"></a>ubuntu for sublime-test-3 install</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo add-apt-repository ppa:webupd8team/sublime-text-3</span><br><span class="line"></span><br><span class="line">sudo apt-get update </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sudo apt-get install sublime-text-installer</span><br></pre></td></tr></table></figure>
<h1 id="ubuntu-for-pycharm"><a href="#ubuntu-for-pycharm" class="headerlink" title="ubuntu for pycharm"></a>ubuntu for pycharm</h1><pre><code>- https://www.jetbrains.com/pycharm/
- Download Professional | Full-featured IDE for Python &amp; Web development
</code></pre><h1 id="ubuntu-for-intelliJIDEA"><a href="#ubuntu-for-intelliJIDEA" class="headerlink" title="ubuntu for intelliJIDEA"></a>ubuntu for intelliJIDEA</h1><pre><code>- https://www.jetbrains.com/idea/
- Download Ultimate | For web and enterprise development 
</code></pre><h1 id="ubuntu-for-chromium-web-Browser"><a href="#ubuntu-for-chromium-web-Browser" class="headerlink" title="ubuntu for chromium web Browser"></a>ubuntu for chromium web Browser</h1><p>  keyboard <code>win</code> Key &gt;&gt; ubuntu software &gt;&gt; Enter &gt;&gt; search chromium web Browser &gt;&gt; selecting &amp;&amp; install </p>
<h1 id="ubuntu-for-env"><a href="#ubuntu-for-env" class="headerlink" title="ubuntu for env"></a>ubuntu for env</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">whoami@whoami-ThinkCentre-E73:/opt/gitlab/books$ cat ~/.bashrc |tail -8</span><br><span class="line">export JAVA_HOME=/opt/cloud/jdk</span><br><span class="line">export IDEA_HOME=/opt/cloud/idea</span><br><span class="line">export PY_HOME=/opt/cloud/pycharm</span><br><span class="line"></span><br><span class="line">export PATH=.:$IDEA_HOME/bin:$PY_HOME/bin:$JAVA_HOME/bin:$PATH</span><br><span class="line"></span><br><span class="line">export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br></pre></td></tr></table></figure>
<h1 id="ubuntu-for-dev"><a href="#ubuntu-for-dev" class="headerlink" title="ubuntu for dev"></a>ubuntu for dev</h1><h1 id="ubuntu-for-git"><a href="#ubuntu-for-git" class="headerlink" title="ubuntu for git"></a>ubuntu for git</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git 	# install git</span><br><span class="line"></span><br><span class="line">cd /opt/gitlab</span><br><span class="line"></span><br><span class="line">git clone git@github.com:apache/ambari.git 	# git project</span><br><span class="line"></span><br><span class="line">git branch -a    # all branch info list</span><br><span class="line"></span><br><span class="line">git checkout -t origin/branch-2.2.2	# switch branch</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">whoami@whoami-ThinkCentre-E73:/opt/gitlab/ambari$ git branch</span><br><span class="line">* branch-2.2.2</span><br><span class="line">  trunk	  # default selecting</span><br></pre></td></tr></table></figure>
<h1 id="ubuntu-16-4-for-ambari"><a href="#ubuntu-16-4-for-ambari" class="headerlink" title="ubuntu 16.4 for ambari"></a>ubuntu 16.4 for ambari</h1><pre><code>https://cwiki.apache.org/confluence/display/AMBARI/Ambari+Development
</code></pre><ul>
<li>python 2.7</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo sh setuptools-0.6c11-py2.7.egg</span><br><span class="line">sudo apt-get install python-dev</span><br></pre></td></tr></table></figure>
<ul>
<li>install dependency node &amp;&amp; npm<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https://nodejs.org/dist/v0.10.44/	# version v0.10.44, 0.12.x won&apos;t work. </span><br><span class="line"></span><br><span class="line">whoami@whoami-ThinkCentre-E73:/opt/cloud/node/bin$ cat ~/.bashrc |grep NODE</span><br><span class="line">export NODE_HOME=/opt/cloud/node</span><br><span class="line">export PATH=.:$NODE_HOME/bin:$MVN_HOME/bin:$IDEA_HOME/bin:$PY_HOME/bin:$JAVA_HOME/bin:$PATH</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="build-ambari"><a href="#build-ambari" class="headerlink" title="build ambari"></a>build ambari</h1><pre><code>- https://cwiki.apache.org/confluence/display/AMBARI/Coding+Guidelines+for+Ambari
- by https://github.com/apache/ambari/releases/tag/release-2.2.2
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g brunch@1.7.20</span><br><span class="line"></span><br><span class="line">$ cd ambari/ambari-web</span><br><span class="line">$ rm -rf node_modules public</span><br><span class="line">$ npm install</span><br><span class="line">$ ulimit -n 10000</span><br><span class="line">$ brunch build</span><br><span class="line"></span><br><span class="line">$ brunch watch --server (or use the shorthand: brunch w -s)</span><br></pre></td></tr></table></figure>
<ul>
<li><p>For example</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">whoami@whoami-ThinkCentre-E73:/opt/gitlab/ambari/ambari-web$ brunch w -s</span><br><span class="line">15 Aug 11:17:58 - info: application started on http://localhost:3333/</span><br><span class="line"></span><br><span class="line">whoami@whoami-ThinkCentre-E73:/opt/gitlab/ambari$ mvn clean package -DskipTests -Drat.ignoreErrors=true # mvn package</span><br></pre></td></tr></table></figure>
</li>
<li><p>build deploy package</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ mvn versions:set -DnewVersion=2.2.2.0.0</span><br><span class="line">$ pushd ambari-metrics</span><br><span class="line">$ mvn versions:set -DnewVersion=2.2.2.0.0</span><br><span class="line">$ popd</span><br><span class="line"></span><br><span class="line">$ export MAVEN_OPTS=&quot;-Xmx2g -XX:MaxPermSize=512M -XX:ReservedCodeCacheSize=512m&quot;</span><br><span class="line"></span><br><span class="line">$ mvn -B clean install package jdeb:jdeb -DnewVersion=2.2.2.0.0 -DskipTests -Dpython.ver=&quot;python &gt;= 2.6&quot; -Drat.numUnapprovedLicenses=100 -X -Preplaceurl	#for ubuntu</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ mvn -B install package rpm:rpm -DnewVersion=2.2.1 -DskipTests -Dpython.ver=&quot;python &gt;= 2.6&quot; -Preplaceurl #For redhat/centos</span><br></pre></td></tr></table></figure>
<ul>
<li><p>build ubuntu 16.4 deb package<br><img src="./ambari-build-for-ubuntu-15.4-LTS.png" alt></p>
</li>
<li><p>FAQ </p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">[ERROR] Failed to execute goal com.github.eirslett:frontend-maven-plugin:0.0.16:npm (npm install) on project ambari-admin: Failed to run task: &apos;npm install --unsafe-perm --color=false&apos; failed. (error code 1) -&gt; [Help 1]</span><br><span class="line"></span><br><span class="line">ambari-admin project change pom.xml , comment centent </span><br><span class="line">   &lt;!--&lt;plugin&gt;</span><br><span class="line">        &lt;groupId&gt;com.github.eirslett&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;frontend-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;0.0.16&lt;/version&gt;</span><br><span class="line">        &lt;configuration&gt;</span><br><span class="line">          &lt;nodeVersion&gt;v0.10.44&lt;/nodeVersion&gt;</span><br><span class="line">          &lt;npmVersion&gt;2.15.0&lt;/npmVersion&gt;</span><br><span class="line">          &lt;workingDirectory&gt;src/main/resources/ui/admin-web/&lt;/workingDirectory&gt;</span><br><span class="line">        &lt;/configuration&gt;</span><br><span class="line">        &lt;executions&gt;</span><br><span class="line">          &lt;execution&gt;</span><br><span class="line">            &lt;id&gt;install node and npm&lt;/id&gt;</span><br><span class="line">            &lt;phase&gt;generate-sources&lt;/phase&gt;</span><br><span class="line">            &lt;goals&gt;</span><br><span class="line">              &lt;goal&gt;install-node-and-npm&lt;/goal&gt;</span><br><span class="line">            &lt;/goals&gt;</span><br><span class="line">          &lt;/execution&gt;</span><br><span class="line">          &lt;execution&gt;</span><br><span class="line">            &lt;id&gt;npm install&lt;/id&gt;</span><br><span class="line">            &lt;phase&gt;generate-sources&lt;/phase&gt;</span><br><span class="line">            &lt;goals&gt;</span><br><span class="line">              &lt;goal&gt;npm&lt;/goal&gt;</span><br><span class="line">            &lt;/goals&gt;</span><br><span class="line">            &lt;configuration&gt;</span><br><span class="line">              &lt;arguments&gt;install &amp;#45;&amp;#45;unsafe-perm&lt;/arguments&gt;</span><br><span class="line">            &lt;/configuration&gt;</span><br><span class="line">          &lt;/execution&gt;</span><br><span class="line">        &lt;/executions&gt;</span><br><span class="line">      &lt;/plugin&gt;--&gt;</span><br><span class="line"></span><br><span class="line">[ERROR] Failed to execute goal org.vafer:jdeb:1.0.1:jdeb (default-cli) on project ambari-metrics-hadoop-sink: Failed to create debian package /opt/gitlab/ambari-release-2.2.2/ambari-metrics/ambari-metrics-hadoop-sink/target/ambari-metrics-hadoop-sink_2.2.2.0.0_all.deb: &quot;/opt/gitlab/ambari-release-2.2.2/ambari-metrics/ambari-metrics-hadoop-sink/src/main/package/deb/control&quot; is not a valid &apos;control&apos; directory) -&gt; [Help 1]</span><br><span class="line">org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.vafer:jdeb:1.0.1:jdeb (default-cli) on project ambari-metrics-hadoop-sink: Failed to create debian package /opt/gitlab/ambari-release-2.2.2/ambari-metrics/ambari-metrics-hadoop-sink/target/ambari-metrics-hadoop-sink_2.2.2.0.0_all.deb</span><br><span class="line"></span><br><span class="line">ambari-metrics fails to package from .deb on ubuntu 16.04 LTS BUG:</span><br><span class="line">	- https://issues.apache.org/jira/browse/AMBARI-12977</span><br></pre></td></tr></table></figure>
<h1 id="ubuntu-for-docker"><a href="#ubuntu-for-docker" class="headerlink" title="ubuntu for docker"></a>ubuntu for docker</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> sudo apt-get install docker.io</span><br><span class="line"> </span><br><span class="line"> /etc/init.d/docker start</span><br><span class="line"></span><br><span class="line">sudo systemctl stop docker.service</span><br><span class="line">sudo systemctl start docker.service</span><br><span class="line"></span><br><span class="line">sudo systemctl status docker.service</span><br><span class="line"></span><br><span class="line">sudo docker images</span><br></pre></td></tr></table></figure>
<h1 id="docker-registry-For-Portus-install"><a href="#docker-registry-For-Portus-install" class="headerlink" title="docker registry For Portus install"></a>docker registry For Portus install</h1><p> <a href="http://www.dockerinfo.net/879.html" target="_blank" rel="noopener">http://www.dockerinfo.net/879.html</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">$ git clone git@github.com:SUSE/Portus.git</span><br><span class="line"></span><br><span class="line">$ sudo apt install python-pip</span><br><span class="line"></span><br><span class="line">$ sudo apt install docker-compose</span><br><span class="line"></span><br><span class="line">$ sudo pip install --upgrade pip</span><br><span class="line"></span><br><span class="line">root@whoami-ThinkCentre-E73:~# docker-compose version</span><br><span class="line">docker-compose version 1.8.0, build 94f7016</span><br><span class="line">docker-py version: 1.9.0</span><br><span class="line">CPython version: 2.7.12</span><br><span class="line">OpenSSL version: OpenSSL 1.0.2g-fips  1 Mar 2016</span><br><span class="line"></span><br><span class="line">whoami@whoami-ThinkCentre-E73:~$ docker-compose version</span><br><span class="line">docker-compose version 1.8.0, build 94f7016</span><br><span class="line">docker-py version: 1.9.0</span><br><span class="line">CPython version: 2.7.12</span><br><span class="line">OpenSSL version: OpenSSL 1.0.2g-fips  1 Mar 2016</span><br><span class="line"></span><br><span class="line">+ install registory auto</span><br><span class="line">whoami@whoami-ThinkCentre-E73:/opt/gitlab/Portus$ ./compose-setup.sh -e hub.itweet.cn</span><br><span class="line"></span><br><span class="line">###########</span><br><span class="line"># WARNING #</span><br><span class="line">###########</span><br><span class="line"></span><br><span class="line">This deployment method is intended for testing/development purposes.</span><br><span class="line">To deploy Portus on production please take a look at: http://port.us.org/documentation.html</span><br><span class="line"></span><br><span class="line">You have to use docker-compose 1.6 or later.</span><br><span class="line"></span><br><span class="line">$ sudo pip install --upgrade docker-compose</span><br><span class="line"></span><br><span class="line">....</span><br><span class="line">....</span><br><span class="line"></span><br><span class="line">Portus: configuring database... [SUCCESS]</span><br><span class="line"></span><br><span class="line">###################</span><br><span class="line">#     SUCCESS     #</span><br><span class="line">###################</span><br><span class="line"></span><br><span class="line">Make sure port 3000 and 5000 are open on host hub.itweet.cn</span><br><span class="line"></span><br><span class="line">Open http://hub.itweet.cn:3000 with your browser and perform the following steps:</span><br><span class="line"></span><br><span class="line">  1. Create an admin account</span><br><span class="line">  2. You will be redirected to a page where you have to register the registry. In this form:</span><br><span class="line">    - Choose a custom name for the registry.</span><br><span class="line">    - Enter hub.itweet.cn:5000 as the hostname.</span><br><span class="line">    - Do *not* check the &quot;Use SSL&quot; checkbox, since this setup is not using SSL.</span><br><span class="line"></span><br><span class="line">Perform the following actions on the docker hosts that need to interact with your registry:</span><br><span class="line"></span><br><span class="line">  - Ensure the docker daemon is started with the &apos;--insecure-registry hub.itweet.cn:5000&apos;</span><br><span class="line">  - Perform the docker login.</span><br><span class="line"></span><br><span class="line">To authenticate against your registry using the docker cli do:</span><br><span class="line"></span><br><span class="line">  $ docker login -u &lt;portus username&gt; -p &lt;password&gt; -e &lt;email&gt; hub.itweet.cn:5000</span><br><span class="line"></span><br><span class="line">To push an image to the private registry:</span><br><span class="line"></span><br><span class="line">  $ docker pull busybox</span><br><span class="line">  $ docker tag busybox hub.itweet.cn:5000/&lt;username&gt;busybox</span><br><span class="line">  $ docker push hub.itweet.cn:5000/&lt;username&gt;busybox</span><br><span class="line"></span><br><span class="line">WebUI: http://portus.onlyeric.com:3000/users/sign_up # create admin account...,start Portus registry trip.</span><br><span class="line">registryAddr: hub.itweet.cn:5000</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* login webui,config base info success...</span><br><span class="line"></span><br><span class="line">root@whoami-ThinkCentre-E73:/opt/gitlab/Portus# docker login -u admin -p admin123 hub.itweet.cn:5000</span><br><span class="line">Error response from daemon: Get https://hub.itweet.cn:5000/v1/users/: http: server gave HTTP response to HTTPS client</span><br><span class="line"></span><br><span class="line">	+ change DOCKER_OPTS add content</span><br><span class="line"></span><br><span class="line">	root@whoami-ThinkCentre-E73:/opt/gitlab/Portus# cat /etc/default/docker |grep 5000</span><br><span class="line">	DOCKER_OPTS=&quot;--insecure-registry hub.itweet.cn:5000&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># docker login -u admin -p admin123 hub.itweet.cn:5000</span><br><span class="line">Login Succeeded</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># docker pull busybox</span><br><span class="line"># docker tag busybox hub.itweet.cn:5000/admin/busybox:latest</span><br><span class="line"># docker push hub.itweet.cn:5000/admin/busybox:latest</span><br></pre></td></tr></table></figure></p>
<h1 id="harbor-for-docker-registory"><a href="#harbor-for-docker-registory" class="headerlink" title="harbor for docker registory"></a>harbor for docker registory</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"># vi /etc/hosts</span><br><span class="line">192.168.0.144	harbor.itweet.cn	skynet.reg</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#  sudo vi /etc/default/docker</span><br><span class="line">   DOCKER_OPTS=&quot;--insecure-registry harbor.skynet.com&quot;</span><br><span class="line"></span><br><span class="line"># sudo service docker restart</span><br><span class="line"></span><br><span class="line"># pwd</span><br><span class="line">/opt/gitlab/harbor/Deploy</span><br><span class="line"></span><br><span class="line"># vi harbor.cfg</span><br><span class="line">  hostname = harbor.skynet.com</span><br><span class="line"></span><br><span class="line"># ./prepare </span><br><span class="line">Generated configuration file: ./config/ui/env</span><br><span class="line">Generated configuration file: ./config/ui/app.conf</span><br><span class="line">Generated configuration file: ./config/registry/config.yml</span><br><span class="line">Generated configuration file: ./config/db/env</span><br><span class="line">Generated configuration file: ./config/jobservice/env</span><br><span class="line">Clearing the configuration file: ./config/ui/private_key.pem</span><br><span class="line">Clearing the configuration file: ./config/registry/root.crt</span><br><span class="line">Generated configuration file: ./config/ui/private_key.pem</span><br><span class="line">Generated configuration file: ./config/registry/root.crt</span><br><span class="line">The configuration files are ready, please use docker-compose to start the service.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># docker-compose up -d</span><br><span class="line"></span><br><span class="line"># docker-compose stop </span><br><span class="line"># docker-compose start </span><br><span class="line"># docker-compose restart </span><br><span class="line"># docker-compose rm 	# rm stoping all container</span><br><span class="line"></span><br><span class="line"># docker ps -a|wc -l</span><br><span class="line">7</span><br><span class="line"></span><br><span class="line">If everything worked properly, you should be able to open a browser to visit the admin portal at http://harbor.itweet.cn. Note that the default administrator username/password are admin/Harbor12345	.</span><br><span class="line"></span><br><span class="line">Log in to the admin portal and create a new project, e.g. myproject. You can then use docker commands to login and push images (by default, the registry server listens on port 80):</span><br><span class="line"></span><br><span class="line"># docker login harbor.skynet.reg</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">* For example</span><br><span class="line"></span><br><span class="line"># docker login harbor.itweet.cn</span><br><span class="line">Username: test</span><br><span class="line">Password: </span><br><span class="line">Login Succeeded</span><br><span class="line"></span><br><span class="line"># docker pull ubuntu:14.04 </span><br><span class="line"></span><br><span class="line"># docker tag  ubuntu:14.04 harbor.itweet.cn/test/ubuntu:14.04  </span><br><span class="line"></span><br><span class="line"># docker push harbor.itweet.cn/test/ubuntu:14.04  </span><br><span class="line"></span><br><span class="line"># docker pull harbor.skynet.com/test/ubuntu:14.04</span><br><span class="line"></span><br><span class="line">* login web check</span><br><span class="line">  http://harbor.itweet.cn   admin/Harbor12345</span><br></pre></td></tr></table></figure>
<h1 id="SkynetEye"><a href="#SkynetEye" class="headerlink" title="SkynetEye"></a>SkynetEye</h1><ul>
<li>agent &amp;&amp; server by env</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install msgpack-rpc-python</span><br></pre></td></tr></table></figure>
<h1 id="docker-on-nexus"><a href="#docker-on-nexus" class="headerlink" title="docker on nexus"></a>docker on nexus</h1><p> <a href="https://hub.docker.com/r/sonatype/nexus/" target="_blank" rel="noopener">https://hub.docker.com/r/sonatype/nexus/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">docker pull sonatype/nexus</span><br><span class="line"></span><br><span class="line">docker run -d -p 8081:8081 --name nexus sonatype/nexus:latest</span><br><span class="line"></span><br><span class="line">docker ps -l</span><br><span class="line"></span><br><span class="line">To test:</span><br><span class="line">	curl http://localhost:8081/service/local/status</span><br><span class="line"></span><br><span class="line">docker logs -f nexus</span><br><span class="line"></span><br><span class="line">Note:</span><br><span class="line">	Default credentials are: admin / admin123</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Volume mapping to local host machine:</span><br><span class="line"></span><br><span class="line">mkdir /data/nexus-data &amp;&amp; chown -R 200 /data/nexus-data</span><br><span class="line"></span><br><span class="line">docker run -d -p 8081:8081 --name nexus -v /data/nexus-data:/sonatype-work sonatype/nexus</span><br></pre></td></tr></table></figure></p>
<h1 id="Ambari-HDPDocuments"><a href="#Ambari-HDPDocuments" class="headerlink" title="Ambari HDPDocuments"></a>Ambari HDPDocuments</h1><ul>
<li><a href="http://docs.hortonworks.com/HDPDocuments/Ambari/Ambari-2.2.2.0/index.html" target="_blank" rel="noopener">http://docs.hortonworks.com/HDPDocuments/Ambari/Ambari-2.2.2.0/index.html</a></li>
<li><a href="http://docs.hortonworks.com/HDPDocuments/Ambari-2.2.2.0/bk_Installing_HDP_AMB/content/_hdp_stack_repositories.html" target="_blank" rel="noopener">http://docs.hortonworks.com/HDPDocuments/Ambari-2.2.2.0/bk_Installing_HDP_AMB/content/_hdp_stack_repositories.html</a></li>
</ul>
<p>spark-submit   –class streaming.core.StreamingApp \<br>–master yarn-cluster \<br>–name sql-interactive \<br>/tmp/streamingpro-0.3.4-SNAPSHOT-online-1.6.1.jar    \<br>-streaming.name sql-interactive    \<br>-streaming.platform spark   \<br>-streaming.rest true   \<br>-streaming.driver.port 9004   \<br>-streaming.spark.service true    \<br>-streaming.zk.servers bigdata-hdp-server-3:2181,bigdata-hdp-server-1:2181,bigdata-hdp-server-2:2181 \<br>-streaming.zk.conf_root_dir  /streamingpro/sparkstreaming </p>
<ul>
<li>‘/zeppelin-‘ + zeppelin + ‘*.pid’</li>
</ul>
<p>pid_file=glob.glob(‘/var/run/zeppelin-notebook’ + ‘/zeppelin-‘+ ‘zeppelin’+ ‘*.pid’)[0]</p>
<h1 id="rrdtools-for-ubuntu"><a href="#rrdtools-for-ubuntu" class="headerlink" title="rrdtools for ubuntu"></a>rrdtools for ubuntu</h1><ul>
<li><a href="http://martybugs.net/linux/rrdtool/" target="_blank" rel="noopener">http://martybugs.net/linux/rrdtool/</a></li>
<li>apt-get install librrds-perl rrdtool</li>
</ul>
<h1 id="pipy国内镜像-for-ubuntu"><a href="#pipy国内镜像-for-ubuntu" class="headerlink" title="pipy国内镜像 for ubuntu"></a>pipy国内镜像 for ubuntu</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">http://pypi.douban.com/  豆瓣</span><br><span class="line"></span><br><span class="line">http://pypi.hustunique.com/  华中理工大学</span><br><span class="line"></span><br><span class="line">http://pypi.sdutlinux.org/  山东理工大学  </span><br><span class="line"></span><br><span class="line">http://pypi.mirrors.ustc.edu.cn/  中国科学技术大学</span><br><span class="line"></span><br><span class="line">pip install virtualenv -i http://pypi.douban.com/simple</span><br><span class="line">pip install --upgrade pip --trusted-host pypi.douban.com</span><br><span class="line">pip install --upgrade pip --trusted-host mirrors.aliyun.com</span><br><span class="line"></span><br><span class="line">pip install --upgrade pip setuptools</span><br><span class="line"></span><br><span class="line">sudo add-apt-repository ppa:webupd8team/sublime-text-3</span><br><span class="line">sudo apt-get install sublime-text-installer</span><br><span class="line"></span><br><span class="line">sudo apt-get install python-dev</span><br><span class="line">sudo apt-get install python-pip</span><br><span class="line">sudo apt-get install librrds-perl rrdtool</span><br></pre></td></tr></table></figure>
<p>原创文章，转载请注明： 转载自<a href="http://www.itweet.cn" target="_blank" rel="noopener">Itweet</a>的博客<br><code>本博客的文章集合:</code> <a href="http://www.itweet.cn/blog/archive/" target="_blank" rel="noopener">http://www.itweet.cn/blog/archive/</a></p>

            </div>
          

    
      <footer class="post-footer">
		
		<div class="post-tags">
		  
			<a href="/tags/ubuntu/">ubuntu</a>
		  
		</div>
		

        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2017/05/07/Machine-Learning-7/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Machine-Learning-7</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2016/12/14/Moving the Ambari Server/">
        <span class="next-text nav-default">Moving the Ambari Server</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>

        
  <div class="comments" id="comments">
    
  </div>


      </footer>
    
  </article>

    </div>

      </div>

      <footer id="colophon"><span class="copyright-year">
    
        &copy;
    
        2014 -
    
    2019
    <span class="footer-author">Xu Jiang.</span>
    <span class="power-by">
        Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a> and <a class="theme-link" href="https://github.com/frostfan/hexo-theme-polarbear">Polar Bear</a>
    </span>
</span>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>
    


    




  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  

    <script type="text/javascript" src="/js/src/theme.js?v=1.1"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=1.1"></script>

  </body>
</html>
